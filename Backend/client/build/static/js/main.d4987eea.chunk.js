(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(5),a=n.n(s),o=(n(11),n(4)),i=n(3),j=n(1);const l={container:{textAlign:"center",padding:"20px",backgroundColor:"#9c88ff"},buttons:{margin:"20px 0"},button:{textDecoration:"none",padding:"10px 20px",color:"#fff",backgroundColor:"#007bff",borderRadius:"5px",margin:"5px",fontSize:"16px"}};var d=()=>Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{style:l.buttons,children:[Object(j.jsx)(o.b,{to:"/login",style:l.button,children:"Log In"}),Object(j.jsx)(o.b,{to:"/signup",style:l.button,children:"Sign Up"}),Object(j.jsxs)("div",{children:["Server URL: ","/"]})]}),Object(j.jsxs)("p",{children:["Already have an account? ",Object(j.jsx)(o.b,{to:"/login",children:"Log in here"})]})]});const b=Object(c.createContext)();var h=function(e){let{children:t}=e;const[n,r]=Object(c.useState)(null);return Object(c.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return void console.error("No token found");console.log(e);const t=await fetch("http://localhost:5000/authentication/profile",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Error: ${t.status} ${t.statusText}`);const n=await t.json();r(n)}catch(e){console.error("Error fetching user profile:",e.message||e)}})()}),[]),Object(j.jsx)(b.Provider,{value:{currentUser:n,setCurrentUser:r},children:t})};var u=()=>{const[e,t]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[s,a]=Object(c.useState)(""),[l,d]=Object(c.useState)(!1),h=Object(i.o)(),{setCurrentUser:u}=Object(c.useContext)(b);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Login to Your Account"}),s&&Object(j.jsx)("p",{className:"error",children:s}),l?Object(j.jsx)("p",{className:"success",children:"Login successful! Redirecting..."}):Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a("");const c={email:e,password:n};try{const e=await fetch("http://localhost:5000/accounts/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(e.ok){const t=(await e.json()).token;localStorage.setItem("token",t);const n=await fetch("http://localhost:5000/authentication/profile",{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Failed to fetch user profile");const c=await n.json();u(c),d(!0),h("/dashboard")}else{const t=await e.json();a(t.error||"Login failed, please check your credentials.")}}catch(s){a("An error occurred during login.")}},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Email:"}),Object(j.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]}),Object(j.jsx)("button",{type:"submit",children:"Login"})]}),Object(j.jsxs)("p",{children:["Don't have an account? ",Object(j.jsx)(o.b,{to:"/signup",children:"Sign Up"})]})]})};var O=e=>{let{user:t}=e;return t?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"User Profile"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"Username:"})," ",t.username]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"Email:"})," ",t.email]})]}):Object(j.jsx)("p",{children:"No user data available"})};var x=e=>{let{onAddTransaction:t}=e;const[n,r]=Object(c.useState)("income"),[s,a]=Object(c.useState)(""),[o,i]=Object(c.useState)(""),[l,d]=Object(c.useState)("");return Object(j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&o&&l?(t({type:n,category:s,amount:parseFloat(o),date:l}),a(""),i(""),d("")):alert("Please fill out all fields")},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Type:"}),Object(j.jsxs)("select",{value:n,onChange:e=>r(e.target.value),children:[Object(j.jsx)("option",{value:"income",children:"Income"}),Object(j.jsx)("option",{value:"expense",children:"Expense"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Category:"}),Object(j.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Category",required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Amount:"}),Object(j.jsx)("input",{type:"number",value:o,onChange:e=>i(e.target.value),placeholder:"Amount",required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Date:"}),Object(j.jsx)("input",{type:"date",value:l,onChange:e=>d(e.target.value),required:!0})]}),Object(j.jsx)("button",{type:"submit",children:"Add Transaction"})]})};var p=e=>{let{transactions:t}=e;return t.length?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Transaction History"}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Type"}),Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("th",{children:"Amount"}),Object(j.jsx)("th",{children:"Date"}),Object(j.jsx)("th",{children:"Account"})]})}),Object(j.jsx)("tbody",{children:t.map(((e,t)=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.type}),Object(j.jsx)("td",{children:e.category}),Object(j.jsxs)("td",{children:["$",e.amount.toFixed(2)]}),Object(j.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),Object(j.jsx)("td",{children:e.account_id})]},t)))})]})]}):Object(j.jsx)("p",{children:"No transactions found"})};var g=()=>{const[e,t]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[s,a]=Object(c.useState)(""),[o,i]=Object(c.useState)(""),[l,d]=Object(c.useState)(""),[b,h]=Object(c.useState)(!1);return Object(j.jsxs)("div",{className:"signup-container",children:[Object(j.jsx)("h2",{children:"Sign Up"}),l&&Object(j.jsx)("p",{className:"error",children:l}),b?Object(j.jsx)("p",{className:"success",children:"Signup successful! Please log in."}):Object(j.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d(""),s!==o)return void d("Passwords do not match.");const c={username:e,email:n,password:s};try{const e=await fetch("http://localhost:5000/accounts/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(e.ok)h(!0);else{const t=await e.json();d(t.error||"Signup failed.")}}catch(l){d("An error occurred during signup.")}},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Username:"}),Object(j.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Email:"}),Object(j.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),required:!0})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Confirm Password:"}),Object(j.jsx)("input",{type:"password",value:o,onChange:e=>i(e.target.value),required:!0})]}),Object(j.jsx)("button",{type:"submit",children:"Sign Up"})]})]})};var v=()=>{const{currentUser:e}=Object(c.useContext)(b),t=void 0,[n,r]=Object(c.useState)(""),[s,a]=Object(c.useState)(""),[o,i]=Object(c.useState)([]);Object(c.useEffect)((()=>{(async()=>{if(e)try{const e=await fetch("http://localhost:5000/transactions/undefined"),t=await e.json();Array.isArray(t)?i(t):console.error("Expected array, but got:",t)}catch(t){console.error("Error fetching transactions:",t)}else console.error("User not logged in")})()}),[t]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Dashboard"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Input Your Income"}),Object(j.jsx)("input",{type:"number",value:n,onChange:e=>{r(e.target.value)},placeholder:"Enter your income here"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Log Your Transactions"}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s)try{const n=await fetch("http://localhost:5000/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_id:t,type:"expense",category:"General",amount:parseFloat(s),date:(new Date).toISOString()})});if(n.ok){const e=await n.json();i((t=>[...t,e])),a("")}else console.error("Error adding transaction",e)}catch(n){console.error("Error adding transaction:",n)}},children:[Object(j.jsx)("input",{type:"number",value:s,onChange:e=>{a(e.target.value)},placeholder:"Enter a transaction amount",required:!0}),Object(j.jsx)("button",{type:"submit",children:"Add Transaction"})]})]}),Object(j.jsx)("h4",{children:"Transactions List"}),Object(j.jsx)("ul",{children:Array.isArray(o)&&o.length>0?o.map((e=>Object(j.jsxs)("li",{children:["$",e.amount.toFixed(2)," - ",e.category," (",e.type,")"]},e.transaction_id))):Object(j.jsx)("p",{children:"No transactions found."})})]})};var m=function(){return Object(j.jsxs)("main",{children:[Object(j.jsx)("h1",{children:"404: PAGE NOT FOUND"}),Object(j.jsx)("p",{children:"Oops, sorry, we can't find this page!"}),Object(j.jsx)("img",{src:"http://localhost:5000/images/kittykat.jpeg",alt:"cute cat pic"})]})};n(13);var f=function(){return Object(j.jsx)(h,{children:Object(j.jsx)(o.a,{children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/",element:Object(j.jsx)(d,{})}),Object(j.jsx)(i.a,{path:"/login",element:Object(j.jsx)(u,{})}),Object(j.jsx)(i.a,{path:"/user",element:Object(j.jsx)(O,{})}),Object(j.jsx)(i.a,{path:"/form",element:Object(j.jsx)(x,{})}),Object(j.jsx)(i.a,{path:"/dashboard",element:Object(j.jsx)(v,{})}),Object(j.jsx)(i.a,{path:"/transactionlist",element:Object(j.jsx)(p,{})}),Object(j.jsx)(i.a,{path:"/signup",element:Object(j.jsx)(g,{})}),Object(j.jsx)(i.a,{path:"*",element:Object(j.jsx)(m,{})})]})})})};var y=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((t=>{let{getCLS:n,getFID:c,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),y()}},[[14,1,2]]]);
//# sourceMappingURL=main.d4987eea.chunk.js.map